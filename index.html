<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lockeen Localization Services</title>
    <meta name="theme-color" content="#111827" />
    <link rel="manifest" href='data:application/manifest+json,{"name":"Lockeen Localization","short_name":"Lockeen","description":"An animated logo and contact form for Lockeen localization services.","start_url":"/index.html","display":"standalone","background_color":"#000000","theme_color":"#111827","orientation":"portrait-primary","icons":[{"src":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAYAAABS3GwHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABCSURBVHja7cEBDQAAAMKg909tDjegAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAbNXgAAdUjL/8AAAAASUVORK5CYII=","type":"image/png","sizes":"192x192","purpose":"any maskable"},{"src":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABMSURBVHja7cExAQAAAMKg9U9tCF8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB42gAQAQABeAABAAAAAElFTkSuQmCC","type":"image/png","sizes":"512x512","purpose":"any maskable"}]}' />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      @keyframes gradientBG {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      .animated-gradient {
        background: linear-gradient(135deg, #111827 0%, #1f2937 50%, #111827 100%);
        background-size: 300% 300%;
        animation: gradientBG 20s ease infinite;
      }
      @keyframes pulse-subtle {
        0%, 100% {
          transform: scale(1);
          opacity: 0.8;
        }
        50% {
          transform: scale(1.03);
          opacity: 1;
        }
      }
      .animate-pulse-subtle {
        animation: pulse-subtle 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.1.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.1.1/",
    "react/": "https://aistudiocdn.com/react@^19.1.1/"
  }
}
</script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<link rel="stylesheet" href="/index.css">
</head>
  <body>
    <div id="root"></div>
    <script type="text/babel" data-type="module">
      import React, { useState, useEffect, useRef } from 'react';
      import ReactDOM from 'react-dom/client';

      // components/AnimatedLogo.tsx
      const AnimatedLogo = () => {
        const PORTFOLIO_URL = 'https://example.com/portfolio';
        const OPENING_SOUND_URL = 'https://cdn.freesound.org/previews/27/27568_37876-lq.mp3';

        const [isAnimated, setIsAnimated] = useState(false);
        const [showContent, setShowContent] = useState(false);
        const audioRef = useRef(null);

        useEffect(() => {
          const animTimer = setTimeout(() => {
            setIsAnimated(true);
            if (audioRef.current) {
              audioRef.current.play().catch(error => {
                console.warn("Audio playback was prevented by the browser.", error);
              });
            }
          }, 100);

          const contentTimer = setTimeout(() => {
            setShowContent(true);
          }, 1200);

          return () => {
            clearTimeout(animTimer);
            clearTimeout(contentTimer);
          };
        }, []);

        return (
          <div className="flex flex-col items-center justify-center gap-8 text-center" aria-live="polite">
            <a
              href={PORTFOLIO_URL}
              target="_blank"
              rel="noopener noreferrer"
              className="cursor-pointer focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-4 focus-visible:ring-offset-gray-900 focus-visible:ring-sky-400 rounded-lg"
              aria-label="Visit Lockeen Portfolio"
              onClick={(e) => e.stopPropagation()}
            >
              <div className="flex items-center" role="img" aria-label="Lockeen Logo">
                <span
                  className={`
                    block text-6xl md:text-7xl font-bold text-sky-400 tracking-tight
                    transition-all duration-1000 ease-in-out
                    ${isAnimated ? 'opacity-100 translate-x-0' : 'opacity-0 -translate-x-full'}
                  `}
                >
                  loc
                </span>
                <span
                  className={`
                    block text-6xl md:text-7xl font-bold text-violet-400 tracking-tight
                    transition-all duration-1000 ease-in-out
                    ${isAnimated ? 'opacity-100 translate-x-0' : 'opacity-0 translate-x-full'}
                  `}
                >
                  keen
                </span>
              </div>
            </a>
            <div className={`transition-all duration-700 ease-in-out ${showContent ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'}`}>
              <h2 className="text-xl md:text-2xl text-gray-300 mb-4 tracking-wide px-4">
                Your vision, perfectly localized from English to Turkish.
              </h2>
              <p className="text-gray-400 text-lg animate-pulse-subtle">
                Click anywhere to continue
              </p>
            </div>
            <audio ref={audioRef} src={OPENING_SOUND_URL} preload="auto" className="hidden" />
          </div>
        );
      };

      // components/ContactForm.tsx
      const ContactForm = ({ onGoBack }) => {
        const [status, setStatus] = useState({ sending: false, success: false, error: null });
        
        const handleSubmit = async (e) => {
          e.preventDefault();
          setStatus({ sending: true, success: false, error: null });
          const form = e.target;
          const data = new FormData(form);

          try {
            const response = await fetch(form.action, {
              method: form.method,
              body: data,
              headers: {
                'Accept': 'application/json'
              }
            });

            if (response.ok) {
              setStatus({ sending: false, success: true, error: null });
              form.reset();
              setTimeout(() => setStatus({ sending: false, success: false, error: null }), 5000);
            } else {
              const errorData = await response.json();
              let errorMessage = 'Submission failed. Please try again.'; // Default error

              if (errorData) {
                // Formspree can return a single `error` string for general issues.
                if (errorData.error) {
                  errorMessage = errorData.error;
                   // Provide more helpful advice for the most common setup error.
                  if (errorMessage.toLowerCase().includes('form not found') || errorMessage.toLowerCase().includes('inactive')) {
                    errorMessage = 'Submission error: Please check your email to activate this form with Formspree.';
                  }
                } 
                // Or it can return an `errors` array for field-specific issues.
                else if (errorData.errors && Array.isArray(errorData.errors)) {
                  errorMessage = errorData.errors.map(err => err.message).join(', ');
                }
              }
              
              // Log the full error for easier debugging.
              console.error('Formspree error details:', JSON.stringify(errorData, null, 2));
              setStatus({ sending: false, success: false, error: errorMessage });
            }
          } catch (error) {
            console.error('Form submission fetch error:', error);
            setStatus({ sending: false, success: false, error: 'An unexpected network error occurred.' });
          }
        };

        return (
          <div className="relative w-full max-w-lg p-8 text-white" onClick={(e) => e.stopPropagation()}>
            <button
              onClick={(e) => {
                e.stopPropagation();
                onGoBack();
              }}
              className="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 rounded-full p-2"
              aria-label="Go back"
            >
              <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
                <path strokeLinecap="round" strokeLinejoin="round" d="M5 15l7-7 7 7" />
              </svg>
            </button>

            <div className="flex items-center justify-center mb-6" role="img" aria-label="Lockeen Logo">
              <span className="text-4xl font-bold text-sky-400 tracking-tight">loc</span>
              <span className="text-4xl font-bold text-violet-400 tracking-tight">keen</span>
            </div>

            <h2 className="text-3xl text-center mb-2 font-bold text-white">Get in Touch</h2>
            <p className="text-center text-sm mb-8 text-gray-400">
              Ready to start a project? Fill out the form below.
            </p>
            <form 
              action="https://formspree.io/f/mgvnazgj"
              method="POST"
              onSubmit={handleSubmit}
              className="flex flex-col gap-6"
            >
              <div className="flex flex-col gap-2">
                <label htmlFor="name" className="text-gray-300">Name</label>
                <input 
                  type="text" 
                  id="name" 
                  name="name"
                  required
                  className="bg-gray-800 border border-gray-600 p-2 rounded-md focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 transition-colors caret-sky-400" 
                />
              </div>
              <div className="flex flex-col gap-2">
                <label htmlFor="email" className="text-gray-300">Email</label>
                <input 
                  type="email" 
                  id="email" 
                  name="email"
                  required
                  className="bg-gray-800 border border-gray-600 p-2 rounded-md focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 transition-colors caret-sky-400"
                />
              </div>
              <div className="flex flex-col gap-2">
                <label htmlFor="message" className="text-gray-300">Message</label>
                <textarea 
                  id="message" 
                  name="message"
                  required
                  rows={4}
                  placeholder="Please tell me about your project..."
                  className="bg-gray-800 border border-gray-600 p-2 rounded-md focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500 transition-colors resize-none caret-sky-400"
                />
              </div>
              <div className="flex items-center gap-3">
                  <input 
                      type="checkbox" 
                      id="portfolio-request" 
                      name="portfolio_request"
                      value="yes"
                      className="h-4 w-4 rounded border-gray-600 bg-gray-800 text-sky-500 focus:ring-sky-500 caret-sky-400"
                  />
                  <label htmlFor="portfolio-request" className="text-gray-300">Request portfolio</label>
              </div>

              <button 
                type="submit" 
                disabled={status.sending}
                className="bg-sky-500 text-white p-3 text-lg font-bold mt-4 rounded-md hover:bg-sky-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-sky-400 transition-colors disabled:bg-gray-500 disabled:cursor-not-allowed"
              >
                {status.sending ? 'Sending...' : 'Get an Offer'}
              </button>
            </form>
            <div className="mt-6 h-6 text-center">
              {status.sending && <p className="text-sky-400">Sending...</p>}
              {status.success && <p className="text-green-400">Message sent successfully!</p>}
              {status.error && <p className="text-red-400">{status.error}</p>}
            </div>
          </div>
        );
      };

      // App.tsx
      const App = () => {
        const BACKGROUND_MUSIC_URL = 'https://cdn.pixabay.com/download/audio/2022/11/11/audio_518334a029.mp3';
        const [showContact, setShowContact] = useState(false);
        const [isMusicPlaying, setIsMusicPlaying] = useState(false);
        const musicRef = useRef(null);

        const toggleMusic = (e) => {
          e.stopPropagation();
          if (musicRef.current) {
            if (isMusicPlaying) {
              musicRef.current.pause();
            } else {
              musicRef.current.volume = 0.3;
              musicRef.current.play().catch(error => {
                console.warn("Background music playback failed:", error);
              });
            }
            setIsMusicPlaying(!isMusicPlaying);
          }
        };

        const handleShowContact = () => {
          if (showContact) return;
          setShowContact(true);
        };

        const handleGoBack = () => {
          setShowContact(false);
        };

        return (
          <main 
            className="text-white min-h-screen flex items-center justify-center overflow-hidden animated-gradient"
            style={{ fontFamily: "'Poppins', sans-serif" }}
          >
            <div 
              className="relative w-full h-screen overflow-hidden"
              onClick={handleShowContact}
              role="button"
              tabIndex={showContact ? -1 : 0}
              aria-label="Click to show contact form"
            >
              <div className={`absolute inset-0 flex flex-col items-center justify-center transition-transform duration-1000 ease-in-out ${showContact ? '-translate-y-full' : 'translate-y-0'}`}>
                <AnimatedLogo />
              </div>
              <div className={`absolute inset-0 flex items-center justify-center transition-transform duration-1000 ease-in-out ${showContact ? 'translate-y-0' : 'translate-y-full'}`}>
                <ContactForm onGoBack={handleGoBack} />
              </div>
            </div>

            <audio ref={musicRef} src={BACKGROUND_MUSIC_URL} loop preload="auto" />
            <button
              onClick={toggleMusic}
              className="fixed bottom-4 right-4 text-gray-400 hover:text-white transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-400 rounded-full p-2 z-10"
              aria-label={isMusicPlaying ? 'Pause music' : 'Play music'}
            >
              {isMusicPlaying ? (
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path strokeLinecap="round" strokeLinejoin="round" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" /></svg>
              ) : (
                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}><path strokeLinecap="round" strokeLinejoin="round" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" /><path strokeLinecap="round" strokeLinejoin="round" d="M17 14l2-2m0 0l2-2m-2 2L17 8m2 2l2 2" /></svg>
              )}
            </button>
          </main>
        );
      };
      
      // index.tsx
      const rootElement = document.getElementById('root');
      if (!rootElement) {
        throw new Error("Could not find root element to mount to");
      }

      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
    <script>
      if ('serviceWorker' in navigator) {
        const serviceWorkerScript = `
          const CACHE_NAME = 'lockeen-v2';
          const APP_SHELL_URLS = [
            '/',
            '/index.html'
          ];

          const VENDOR_URLS = [
            'https://cdn.tailwindcss.com',
            'https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap',
            'https://cdn.pixabay.com/download/audio/2022/11/11/audio_518334a029.mp3',
            'https://cdn.freesound.org/previews/27/27568_37876-lq.mp3',
            'https://aistudiocdn.com/react@^19.1.1',
            'https://aistudiocdn.com/react-dom@^19.1.1/client',
            'https://aistudiocdn.com/react@^19.1.1/jsx-runtime',
            'https://unpkg.com/@babel/standalone/babel.min.js'
          ];

          const URLS_TO_CACHE = [...APP_SHELL_URLS, ...VENDOR_URLS];

          self.addEventListener('install', (event) => {
            event.waitUntil(
              caches.open(CACHE_NAME)
                .then((cache) => {
                  console.log('Service Worker: Caching app shell and vendor assets');
                  const cachePromises = URLS_TO_CACHE.map(urlToCache => {
                    // Requests for caching must be created with cache: 'reload' to ensure
                    // the fresh content is fetched from the network and not from the browser cache.
                    const request = new Request(urlToCache, { cache: 'reload' });
                    return cache.add(request);
                  });
                  return Promise.all(cachePromises);
                })
                .catch(err => {
                  console.error('Service Worker installation failed:', err);
                })
            );
          });

          self.addEventListener('activate', (event) => {
            const cacheWhitelist = [CACHE_NAME];
            event.waitUntil(
              caches.keys().then((cacheNames) => {
                return Promise.all(
                  cacheNames.map((cacheName) => {
                    if (cacheWhitelist.indexOf(cacheName) === -1) {
                      console.log('Service Worker: Deleting old cache:', cacheName);
                      return caches.delete(cacheName);
                    }
                  })
                );
              })
            );
          });

          self.addEventListener('fetch', (event) => {
            if (event.request.method !== 'GET') {
              return;
            }
            
            event.respondWith(
              caches.match(event.request)
                .then((cachedResponse) => {
                  if (cachedResponse) {
                    return cachedResponse;
                  }

                  return fetch(event.request).then(
                    (networkResponse) => {
                      const responseToCache = networkResponse.clone();
                      
                      caches.open(CACHE_NAME)
                        .then((cache) => {
                          if (networkResponse && networkResponse.status === 200) {
                            cache.put(event.request, responseToCache);
                          }
                        });

                      return networkResponse;
                    }
                  ).catch(error => {
                    console.error('Service Worker: Fetching failed:', error);
                    throw error;
                  });
                })
            );
          });
        `;

        window.addEventListener('load', () => {
          const blob = new Blob([serviceWorkerScript], { type: 'application/javascript' });
          const swUrl = URL.createObjectURL(blob);
          navigator.serviceWorker.register(swUrl)
            .then(registration => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(err => {
              console.log('ServiceWorker registration failed: ', err);
            });
        });
      }
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>